!function(){"use strict";angular.module("ui-generics",[]),function(){function e(e){var t=e.$get(),n=-1!==t.host().indexOf(":")?t.host().substring(0,t.host().indexOf(":")):t.host();this.apiUrl=t.protocol+"://"+n+"/api",this.authContext={},this.authUrl="/login",this.cacheKeyPrefix="Cache:",this.cachingEnabled=!0,this.$get=function(){return this},this.get=function(e){return this.hasOwnProperty(e)?this[e]:null},this.getAuthString=function(){var e=[];for(var t in this.authContext)this.authContext.hasOwnProperty(t)&&e.push(t+"="+this.authContext[t]);return e.join("&")},this.set=function(e){if(angular.isObject(e))for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t])}}angular.module("ui-generics").provider("uiGenericsProvider",e)}(),function(){function e(e,t,n){function i(i){var a=e[i||"sessionStorage"];return{storage:a,clear:function(){this.storage.clear()},get:function(e){return this.storage.hasOwnProperty(e)?angular.fromJson(this.storage[e]):null},has:function(e){return this.storage.hasOwnProperty(e)},remove:function(e){this.has(e)&&this.storage.removeItem(e)},set:function(e,i){if(n.cachingEnabled)try{this.storage.setItem(e,angular.toJson(i))}catch(a){t.error("Storage Quote exceeded!",a)}}}}return{init:function(e){return new i(e)}}}angular.module("ui-generics").factory("uigCacheService",e)}(),function(){function e(){function e(){var e=angular.copy(Cookies),t={};return{clear:function(){_.each(t,function(e,t){this.remove(t)})},get:function(t){return this.has(t)?e.get(t):null},has:function(t){return void 0!==e.get(t)},remove:function(n){return t[n]=void 0,e.remove(n)},set:function(n,i,a){t[n]={key:n,value:i,expires:a},a?e.set(n,i,{expires:a}):e.set(n,i)}}}return{init:function(){return new e}}}angular.module("ui-generics").factory("uigCookieService",e)}(),function(){function e(){var e=function(e,t,n){return{category:e,action:t,label:n}},n=function(e){t.push(e)};return{track:function(t,i,a,r){n({event:"ngTrackEvent",attributes:_.extend(e(t,i,a),r)})},trackEvent:function(t,i){n({event:t,attributes:_.extend(e(),i)})}}}var t=window.dataLayer=window.dataLayer||[];angular.module("ui-generics").service("uigGtmService",e)}(),function(){function e(){var e=function(e,t){var n,i=angular.isObject(e)?"":e,a={src:["src"],img_dir:["img_dir","img_file"],img_dir2:["img_dir2","img_file2"],img_dir3:["img_dir3","img_file3"]};return _.forIn(a,function(t,n){return e.hasOwnProperty(n)&&(_.each(t,function(t){e.hasOwnProperty(t)&&e[t]&&(i+=e[t])}),""!==i)?!1:void 0}),i=i.replace(/-i\.|-t\.|-s\.|-m\.|-l\.|-o\./gi,"."),n=i.lastIndexOf("."),-1!==n&&"a"!==t&&(i=i.substr(0,n)+"-"+t+i.substr(n)),i};return{make:function(t,n){var i=n?n.size||t.size||"s":t.size||"s",a=e(t,i);return a?_.extend(_.extend(t,{altText:t.img_alt||t.altText||null,bg:t.bg||!1,bgFixed:t.bgFixed||!1,bindOnce:t.bindOnce||!1,captionText:t.img_caption||t.captionText||null,"class":t["class"]||"",clicked:t.clicked||null,disabled:t.disabled||!1,height:t.height||t.img_height||null,link:t.link||null,name:_.last(a.split("/")),show:t.show||!1,size:i,style:t.bg||n&&n.bg?{background:"transparent url("+a+")","background-repeat":"no-repeat","background-position":"center","background-size":t.bgSize||"cover","background-attachment":t.bgFixed?"fixed":"initial"}:null,src:a,template:null,text:t.text||null,topImage:t.topImage||null,topText:t.topText||null,width:t.width||t.img_width||null}),n):null}}}angular.module("ui-generics").service("uigImageService",e)}(),function(){function e(){return{apply:function(e,t){for(var n=angular.isArray(e)?e:[e],i=0;i<n.length;i++)n[i]=_.extend(angular.copy(n[i]),t);return n},set:function(e,t,n){return e[t]=_.extend(angular.copy(e[t]),n),e[t]}}}angular.module("ui-generics").service("uigImmutableService",e)}(),function(){function e(e,t){var n=[],i=300,a=null,r=null,o=300,u=t.init("sessionStorage"),c=[];return{combine:function(t,n){var i=this;e.cancel(r),c.push(t),r=e(function(){i.runCombinedRequests(n)},o)},isQueued:function(e){return _.find(c,e)},runCombinedRequests:function(e){var t=[],n=c.length>0&&c[0].hasOwnProperty("cacheKey")?c[0].cacheKey+":Queue":null;_.each(c,function(e,n){_.find(t,{id:e.data.id,vars:e.data.vars,alias:e.data.alias})||(e.data.alias=e.data.id+n,t.push(e.data))}),e.post("m",{queries:t},n).then(function(e){e.success&&(_.each(c,function(t){if(e.queries.hasOwnProperty(t.data.alias)){var n={success:!0,results:e.queries[t.data.alias].results};t.hasOwnProperty("cacheKey")&&u.set(t.cacheKey,n),t.callback(n)}}),c=[])})},defer:function(e){n.push(e)},runDeferredRequests:function(){e.cancel(a),a=e(function(){_.each(n,function(e){e.makeRequest(e.httpVerb,e.data,e.id,e.cacheKey).then(e.callback)}),n=[]},i)}}}angular.module("ui-generics").service("uigRestHelper",e)}(),function(){function e(e,t,n,i,a,r,o,u,c){function s(s,l,g){var m=s?e.apiUrl+"/"+s:e.apiUrl,d=r.init(g),h=e.cacheKeyPrefix,f=300,p=null,b="An unknown error occurred.",v=function(e,t,n,i,a){o.defer({httpVerb:e,id:t,data:n,cacheKey:i,cacheTag:l,callback:a,op:s,cacheStorageType:g,makeRequest:k})},y=function(){o.runDeferredRequests()},x=function(t,i,a,r,o){var u=a?m+"/"+a:m,c=i||{},s="GET"===t||"DELETE"===t;s?(c=s&&angular.isArray(i)?i.join("&")+"&"||"":"",u+="?"+c+e.getAuthString(),u+=e.cachingEnabled&&r?"&cacheKey="+h+r:""):(c=angular.extend(c,e.authContext),c.cacheTag=l,e.cachingEnabled&&r&&(c.cacheKey=h+r));var g=n({method:t,url:u,data:c});return g.then(function(e){return T(e,{httpVerb:t,data:i,id:a,cacheKey:r,cacheTag:l,cachedQueries:o})},j)},O=function(e){if("object"==typeof e){if(e.hasOwnProperty("message"))return e.message;for(var t in e)if(e.hasOwnProperty(t)&&angular.isObject(e[t]))return O(e[t]);return null}return null},w=function(e){if(e.hasOwnProperty("CACHE_RESET")){var t=parseInt(e.CACHE_RESET),n=parseInt(d.get("CACHE_RESET"));t>n&&d.clear(),d.set("CACHE_RESET",t)}},j=function(n){if(p=c(y,f),n.status&&401===n.status){if(!n.data.url)return t.path()===e.authUrl?i.reject(n.data):(t.path(e.authUrl),i.reject(n.data));a.location.href=n.data.url}else{if(!n.status||403!==n.status)return null!==n.data&&n.data.hasOwnProperty("message")?(n.data.message=O(n.data),i.reject(n.data)):i.reject(b);a.location.href=e.authUrl}},T=function(t,n){if(p=c(y,f),"string"==typeof t.data&&(t.data={success:!0,message:"",result:t.data}),t.data&&""!==t.data){if(t.data.success||t.data.hasOwnProperty("message")||(t.data.message=O(t.data)||b),e.cachingEnabled)try{"POST"===n.httpVerb&&"m"===n.id&&n.data.hasOwnProperty("queries")&&(_.each(n.data.queries,function(e){e.hasOwnProperty("cache")&&e.cache&&d.set(h+e.id,t.data.queries[e.id])}),_.each(n.cachedQueries,function(e){d.has(h+e.id)&&(t.data.queries[e.id]=d.get(h+e.id))})),w(t.data),n.cacheKey&&d.set(h+n.cacheKey,t.data)}catch(i){u.error("Cache Error",i)}return t.data}},k=function(t,n,a,r){var o=[],u=!0;if(c.cancel(p),u&&e.cachingEnabled&&r&&d.has(h+r))return i.when(d.get(h+r)).then(function(e){return p=c(y,f),e});if(u&&e.cachingEnabled&&"POST"===t&&"m"===a&&n.hasOwnProperty("queries")){var s=[];_.each(n.queries,function(e,t){e.hasOwnProperty("cache")&&e.cache&&d.has(h+e.id)&&s.push(t)}),_.each(s,function(e){o.push(n.queries.splice(e,1)[0])})}return x(t,n,a,r,o)};return{create:function(e){return k("POST",e)},isQueued:function(e){return o.isQueued(e)},list:function(e,t,n){var i=e?"POST":"GET",a=e?"options":null,r={options:e};return t&&(r.page=t),k(i,r,a,n)},custom:function(e,t,n,i){return k(e,n,t,i)},one:function(e,t,n){return k("GET",t,e,n)},post:function(e,t,n,i){return i?void v("POST",e,t,n,i):k("POST",t,e,n)},queue:function(e,t,n){var i=this;d.has(t)?n(d.get(t)):o.combine({data:e,cacheKey:t,cacheTag:l,callback:n},i)},remove:function(e,t){var n=t?"POST":"DELETE",i=t?"delete/"+e:e,a=t?{options:t}:null;return k(n,a,i)},update:function(e,t){return k("PUT",t,e)}}}return{init:function(e,t,n){return new s(e,t||"General",n||"sessionStorage")}}}angular.module("ui-generics").factory("uigRestService",e)}(),function(){function e(){return{restrict:"A",link:function(e,t,n){var i=e.$eval(n.genAttr),a=function(e){_.forIn(e,function(e,n){t.attr(n,e)})};t.removeAttr("gen-attr"),i&&a(i),e.$watch(n.genAttr,function(e,t){e!==t&&a(e)})}}}angular.module("ui-generics").directive("genAttr",e)}(),function(){function e(){function e(){var e=this,t="src/components/gen-button/templates/",n={buttonOnly:t+"button-only.html",linkedButton:t+"linked-button.html"},i=function(t){e.button=_.extend({},t),e.button.templates=n,t&&t.hasOwnProperty("link")&&t.link&&(e.button.template=n.linkedButton),e.button.template||(e.button.template=n.buttonOnly)};e.$onInit=function(){i(e.obj)},e.$onChanges=function(e){e.obj&&!e.obj.isFirstChange()&&i(e.obj.currentValue)}}return{restrict:"A",templateUrl:"src/components/gen-button/gen-button.html",scope:{obj:"<genObj"},controller:e,controllerAs:"vm",bindToController:!0}}angular.module("ui-generics").directive("genButton",e)}(),function(){function e(){function e(e,t,n){function i(e){t(function(){var t=jQuery("."+u.obj.connectWith);t.length>0?e.params.control=t[0].swiper:i(e)},200)}function a(){u.obj.enabled=!1,r&&angular.isArray(r)?_.each(r,function(e){e.destroy()}):r&&r.destroy()}var r,o,u=this;n.matchMedia("(orientation: portrait)").matches,n.innerWidth;u.$onInit=function(){o=u.obj.hasOwnProperty("id")?"."+u.obj.id:".swiper-container",".swiper-container"===o&&(u.obj.id="swiper-container"),u.obj.enabled=!0,t(function(){var e={loop:!1,onSlideChangeEnd:function(e){n.hasOwnProperty(u.obj.id)?n[u.obj.id].initialSlide=e.activeIndex:n[u.obj.id]={initialSlide:e.activeIndex}}};u.obj.pagination&&(e.pagination="."+u.obj.id+"-swiper-pagination",e.scrollbar="."+u.obj.id+"-swiper-scrollbar"),u.obj.navigation&&(e.nextButton="."+u.obj.id+"-swiper-button-next",e.prevButton="."+u.obj.id+"-swiper-button-prev"),e=_.extend(e,u.obj.swiperOptions),n.hasOwnProperty(u.obj.id)&&(e=_.extend(e,n[u.obj.id])),r=new Swiper(o,e),u.obj.hasOwnProperty("connectWith")&&i(r)}),e.$on("SWIPER_FULLSCREEN",function(){u.obj.swiperOptions.initialSlide=r.activeIndex,a(),t(function(){u.$onInit()})})},u.$onDestroy=function(){a()},u.close=function(){e.$emit("SWIPER_FULLSCREEN_CLOSE",function(){u.obj.swiperOptions.initialSlide=r.activeIndex,a(),t(function(){u.$onInit()})})}}return{restrict:"A",templateUrl:"src/components/gen-carousel/gen-carousel.html",scope:{obj:"<genObj"},controller:e,controllerAs:"vm",bindToController:!0,transclude:!0}}angular.module("ui-generics").directive("genCarousel",e)}(),function(){function e(){function e(){var e=this,t="src/components/gen-image/templates/",n={bgImage:"image-bg.html",bottomTextImage:"image-bottom-text.html",bottomTextImageLinked:"linked-image-bottom-text.html",checkboxImage:"image-checkbox.html",full:"image-full.html",fullContent:"image-full-content.html",imageOnly:"image-only.html",linkedImage:"linked-image.html",topTextImage:"image-top-text.html",topTextImageLinked:"linked-image-top-text.html"},i=function(){e.image.attrs={alt:e.image.altText||e.image.text||"","class":e.image["class"],src:e.image.src||"",title:e.image.titleText||e.image.altText||e.image.text||"",bindOnce:e.image.bindOnce||!1}},a=function(a){return a=a||{},e.image=_.extend({},a),e.image.templateDir=t+(a.bindOnce?"bind-once/":""),e.image.templates={},_.forIn(n,function(n,i){e.image.templates[i]=t+n}),i(),a.hasOwnProperty("checkbox")?void(e.image.template=e.image.templates.checkboxImage):a.bg?void(e.image.template=e.image.templates.bgImage):a.link&&a.topText?void(e.image.template=e.image.templates.topTextImageLinked):a.topText?void(e.image.template=e.image.templates.topTextImage):a.link&&a.text?void(e.image.template=e.image.templates.bottomTextImageLinked):a.text?void(e.image.template=e.image.templates.bottomTextImage):(a.src&&a.link&&(e.image.template=e.image.templates.linkedImage),a.topText&&a.text&&a.src&&a.link&&(e.image.template=e.image.templates.full),void(e.image.template||(e.image.template=e.image.templates.imageOnly)))};e.$onInit=function(){a(e.obj)},e.$onChanges=function(e){e.obj&&a(e.obj.currentValue)}}return{restrict:"A",scope:{obj:"<genObj"},templateUrl:"src/components/gen-image/gen-image.html",controller:e,controllerAs:"vm",bindToController:!0}}angular.module("ui-generics").directive("genImage",e)}(),function(){function e(e){return function(t,n,i){t.$watch(function(e){return e.$eval(i.genCompile)},function(i){n.html(i),e(n.contents())(t)})}}angular.module("ui-generics").directive("genCompile",e)}(),function(){function e(){function e(e){var t=this;t.$onInit=function(){t.menu={hidden:!0,loggedIn:!1,type:"",columns:[],user:{first_name:"GUEST"},itemClick:function(){t.toggleMenu()}},t.modalInstance=null,"object"==typeof t.obj&&t.updateMenu(t.obj)},t.$onChanges=function(e){e.obj&&!e.obj.isFirstChange()&&"object"==typeof e.obj.currentValue&&t.updateMenu(e.obj.currentValue)},t.loginClick=function(){t.menu&&t.menu.user&&"GUEST"!==t.menu.user.first_name?t.logout():t.menu.hasOwnProperty("onLoginClick")&&angular.isFunction(t.menu.onLoginClick)&&t.menu.onLoginClick()},t.logout=function(){t.menu.user={first_name:"GUEST"},t.menu.loggedIn=!1,e.$emit("UIG_MENU_USER_LOGGED_OUT")},t.search=function(e){return t.menu.hasOwnProperty("onSearch")?t.menu.onSearch(e):void 0},t.toggleMenu=function(){t.menu.hidden=!t.menu.hidden,e.$emit("UIG_MENU_STATUS_CHANGED",t.menu.hidden)},t.updateMenu=function(e){_.forIn(e,function(e,n){t.menu[n]=e}),t.menu.hasOwnProperty("type")&&(t.menu.template="src/components/gen-menu/templates/"+t.menu.type+".html",t.menu.itemTemplate="src/components/gen-menu/templates/"+t.menu.type+"-menu-item.html")},e.$on("USER_LOGGED_IN",function(e,n){n&&(t.menu.user=n,t.menu.loggedIn=!0)}),e.$on("$stateChangeStart",function(){t.menu.hidden||t.toggleMenu()})}return{restrict:"A",templateUrl:"src/components/gen-menu/gen-menu.html",scope:{obj:"<genObj"},controller:e,controllerAs:"vm",bindToController:!0}}angular.module("ui-generics").directive("genMenu",e)}()}();